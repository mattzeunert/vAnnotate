<!doctype html>
<html>
    <body>
        <style>
            .annotated-element {
                display: inline-block;
                border: 1px solid #ff7777;
                padding: 5px;
                padding-bottom: 2px;
                padding-top: 2px;
                margin-top: 2px;
                margin-bottom: 2px;
            }
            .annotated-element:hover {
                background: #ffaaaa
            }

            .annotation {
                position: absolute;
                background: rgba(0,0,0,.8);
                padding: 5px;
                padding-top: 2px;
                padding-bottom: 2px;
                border-radius: 5px;
                color: white;
            }

            pre {
                font-family: Droid Sans;
            }
        </style>
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>

        <pre>{{code}}</pre>
        <script src='http://code.jquery.com/jquery-1.10.1.js'></script>


        <script>
            $(document).ready(function(){
                var annotationElement = $('<div>')
                    .addClass('annotation')
                    .hide()
                    .appendTo('body');


                $('.annotated-element').on('mouseenter', function(){
                    // Convert to string again because false is converted to a boolean - i.e. the bubble is empty
                    var annotationValue = $(this).data('annotation-value').toString();
                    annotationElement.html(annotationValue);

                    var top, left;
                    top = $(this).offset().top - annotationElement.height() - 6;
                    if (top < 0){
                        top = $(this).offset().top + 20;
                    }
                    left = $(this).offset().left;

                    annotationElement.css({
                        top: top,
                        left: left
                    })
                    annotationElement.show();
                });

                $('.annotated-element').on('mouseleave', function(){
                    annotationElement.hide();
                });

            });
        </script>
    </body>
</html>
